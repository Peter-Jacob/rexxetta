-------------------------------------------------------------------------
Initial REXX INFILE on 23 Mar 2025 at 10:43:35
-------------------------------------------------------------------------
0001 /*REXX program calculates and displays the amount of rainwater collected between towers.*/
0002 call tower  1  5  3  7  2
0003 call tower  5  3  7  2  6  4  5  9  1  2
0004 call tower  2  6  3  5  2  8  1  4  2  2  5  3  5  7  4  1
0005 call tower  5  5  5  5
0006 call tower  5  6  7  8
0007 call tower  8  7  7  6
0008 call tower  6  7 10  7  6
0009 exit                                             /*stick a fork in it,  we're all done. */
0010 /*──────────────────────────────────────────────────────────────────────────────────────*/
0011 tower: procedure; arg y; #= words(y); t.=0; L.=0 /*the T. array holds the tower heights.*/
0012 do j=1  for #;  t.j=word(y,j); _=j-1 /*construct the towers;  max height.   */
0013 L.j=max(t._, L._); t.0=max(t.0, t.j) /*left-most tallest tower; build scale.*/
0014 end   /*j*/
0015 R.=0
0016 do b=#  by -1  for #; _= b+1;  R.b= max(t._, R._) /*right-most tallest tower*/
0017 end   /*b*/
0018 w.=0                                                       /*rainwater collected.*/
0019 do f=1  for #;  if t.f>=L.f | t.f>=R.f  then iterate  /*rain between towers?*/
0020 w.f= min(L.f, R.f) - t.f;     w.00= w.00 + w.f        /*rainwater collected.*/
0021 end   /*f*/
0022 if w.00==0  then w.00= 'no'               /*pretty up wording for "no rainwater".*/
0023 ratio= 2                                  /*used to maintain a good aspect ratio.*/
0024 p.=                                       /*P.  stores plot versions of towers.  */
0025 do c=0  to #;  cc= c * ratio         /*construct the plot+scale for display.*/
0026 do h=1  for t.c+w.c;    glyph= '█' /*maybe show a floor of some tower(s). */
0027 if h>t.c  then glyph= '≈' /*  "     "  rainwater between towers. */
0028 if c==0  then p.h= overlay(right(h, 9)         , p.h,  1   ) /*tower scale*/
0029 else p.h= overlay(copies(glyph,ratio) , p.h, 10+cc) /*build tower*/
0030 end   /*h*/
0031 end     /*c*/
0032 p.1= overlay(w.00  'units of rainwater collected', p.1, 15*ratio+#) /*append text*/
0033 do z=t.0  by -1  to 0;     say p.z   /*display various tower floors & water.*/
0034 end     /*z*/
0035 return
-------------------------------------------------------------------------
Cross Reference Table Solid Variable Names
-------------------------------------------------------------------------
001 t.               11 12 13
002 L.               11 13
003 j                12
004 R.               15 16
005 b                16
006 w.               18 20 20 22
007 f                19
008 ratio            23
009 p.               24 28 32
010 c                25
011 cc               25
012 h                26
013 glyph            26 27
014 z                33
-------------------------------------------------------------------------
Cross Reference Table Bizarre Variable Names
-------------------------------------------------------------------------
001 #                -> newV1            11
002 _                -> newV2            12 16
