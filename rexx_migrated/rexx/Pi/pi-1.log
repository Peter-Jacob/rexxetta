-------------------------------------------------------------------------
Initial REXX INFILE on 23 Mar 2025 at 10:43:24
-------------------------------------------------------------------------
0001 /*REXX program spits out decimal digits of pi  (one digit at a time)  until  Ctrl─Break.*/
0002 parse arg digs oFID .                            /*obtain optional argument from the CL.*/
0003 if digs=='' | digs==","  then digs= 1e6          /*Not specified?  Then use the default.*/
0004 if oFID=='' | oFID==","  then oFID='PI_SPIT.OUT' /* "      "         "   "   "      "   */
0005 write= digs<0                                    /*if ODIGS is <0, also spit pi to file.*/
0006 numeric digits abs(digs) + 4                     /*with bigger digs, spitting is slower.*/
0007 call time 'Reset'                                /*reset the wall─clock (elapsed) timer.*/
0008 signal on halt                                   /*───► HALT when Ctrl─Break is pressed.*/
0009 spit= 0                                          /*the index of the spitted pi dec. digs*/
0010 pi=0;  v=5;   vv=v*v;   g=239;   gg=g*g;  s= 16  /*assign some values to some variables.*/
0011 r= 4                                             /*calculate π with increasing accuracy */
0012 do n=1  by 2  until  old=pi;      old= pi  /*just calculate  pi  with odd integers*/
0013 pi= pi   +   s / (n*v)    -    r / (n*g)   /*    ···  using John Machin's formula.*/
0014 s= -s;    r= -r;    v= v * vv;   g= g * gg /*compute some variables for shortcuts.*/
0015 if n>3     then spit= spit + 1             /*maintain a lag for pi digits rounding*/
0016 if spit<4  then iterate                    /*Not enough digs yet?  Then don't show*/
0017 $= substr(pi, spit-3, 1)                   /*lag behind the true pi calculation.  */
0018 call charout     , $         /*write the spitted digits to the term.*/
0019 if write then call charout oFID, $         /*  "    "     "      "     "  a  file?*/
0020 end   /*n*/
0021 
0022 $= substr(pi, spit - 2);   L= length($) - 4      /*handle any residual decimal digits.  */
0023 if L>0  then do                                  /*if any residual digits, then show 'em*/
0024 call charout     , substr($, 1, L)         /*write to term.  */
0025 if write then call charout oFID, substr($, 1, L)         /*  "    " file?  */
0026 end
0027 say                                              /*stick a fork in it,  we're all done. */
0028 exit: say;  say n%2+1  'iterations took'  format(time("Elapsed"),,2)  'seconds.';   exit 0
0029 halt: say;  say 'PI_SPIT halted via use of Ctrl─Break.';  signal exit /*show iterations.*/
-------------------------------------------------------------------------
Cross Reference Table Solid Variable Names
-------------------------------------------------------------------------
001 digs             2 3
002 oFID             2 4
003 write            5
004 spit             9 15
005 pi               10 13
006 v                10 14
007 vv               10
008 g                10 14
009 gg               10
010 s                10 14
011 r                11 14
012 n                12
013 old              12
014 L                22
-------------------------------------------------------------------------
Cross Reference Table Bizarre Variable Names
-------------------------------------------------------------------------
001 $                -> newV1            17 22
