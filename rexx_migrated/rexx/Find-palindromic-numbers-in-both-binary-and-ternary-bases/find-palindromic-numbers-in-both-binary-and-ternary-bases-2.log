-------------------------------------------------------------------------
Initial REXX INFILE on 23 Mar 2025 at 10:43:13
-------------------------------------------------------------------------
0001 /*REXX program finds  numbers  that are  palindromic  in both  binary  and  ternary.    */
0002 digs=50;  numeric digits digs                    /*biggest known B2B3 palindrome: 44 dig*/
0003 parse arg maxHits .;   if maxHits==''  then maxHits=6              /*use six as a limit.*/
0004 hits=0;                      #= 'fiat'           /*the number of palindromes  (so far). */
0005 call show 0,0,0;       call show 1,1,1           /*show the first two palindromes (fiat)*/
0006 #.=0;    #.1=1;  #.5=1;  #.7=1;  #.8=1           /*modulus nine results that are OK.    */
0007 !.=                                              /* [↓]  build list of powers of three. */
0008 do i=1  until !.i>10**digs;  !.i=3**i;  end /*compute powers of  three  for radix3.*/
0009 p=1                                              /* [↓]  primary search: bin palindromes*/
0010 do #=digs                                   /*use all numbers, however, DEC is odd.*/
0011 binH=x2b( d2x(#) )   + 0                    /*convert some decimal number to binary*/
0012 binL=reverse(binH)                          /*reverse the binary digits  (or bits).*/
0013 dec=x2d( b2x( binH'0'binL) ); _=dec//9;  if #._  then if dec//3\==0  then call radix3
0014 dec=x2d( b2x( binH'1'binL) ); _=dec//9;  if #._  then if dec//3\==0  then call radix3
0015 end   /*#*/                                 /* [↑]  crunch 'til found 'nuff numbers*/
0016 /*──────────────────────────────────────────────────────────────────────────────────────*/
0017 radix3: parse var dec x 1 $,q                    /* [↓] convert decimal  # ──►  ternary.*/
0018 do j=p  while !.j<=x;   end     /*find upper limit of power of three.  */
0019 p=j-1                                    /*use this power of three for next time*/
0020 do k=p  by -1  for p;   _=!.k;   d=x%_;   q=q || d;   x=x//_;   end /*k*/
0021 t=q || x                                 /*handle residual of ternary conversion*/
0022 if t\==reverse(t)  then return           /*is T ternary number not palindromic? */
0023 call show $, t, strip(x2b(d2x($)), , 0)  /*show number: decimal, ternary, binary*/
0024 return                                   /* [↑]   RADIX3 subroutine is sluggish.*/
0025 /*──────────────────────────────────────────────────────────────────────────────────────*/
0026 show: hits=hits+1;         say                   /*bump the number of palindromes found.*/
0027 say right('['hits"]", 5)   right( arg(1), digs)   '(decimal),   ternary='  arg(2)
0028 say right('', 5+1+ digs)                          '             binary ='  arg(3)
0029 if hits>2  then  if hits//2  then #=#'0'
0030 if hits<maxHits  then return               /*Not enough palindromes?  Keep looking*/
0031 exit                                       /*stick a fork in it,  we're all done. */
-------------------------------------------------------------------------
Cross Reference Table Solid Variable Names
-------------------------------------------------------------------------
001 dec              17
002 x                17 20
003 q                17 20
004 j                18
005 p                19
006 k                20
007 d                20
008 t                21
-------------------------------------------------------------------------
Cross Reference Table Bizarre Variable Names
-------------------------------------------------------------------------
001 #.               -> newV1.           6 6 6 6 6
002 !.               -> newV2.           7 8
003 #                -> newV3            4 10 29
004 _                -> newV4            13 14 20
005 $                -> newV5            17
