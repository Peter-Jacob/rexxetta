-------------------------------------------------------------------------
Initial REXX INFILE on 23 Mar 2025 at 10:43:06
-------------------------------------------------------------------------
0001 /*REXX program calculates and displays a range of  Bell numbers  (index starts at zero).*/
0002 parse arg LO HI .                                /*obtain optional arguments from the CL*/
0003 if LO=='' & HI==""   then do; LO=0; HI=14;  end  /*Not specified?  Then use the default.*/
0004 if LO=='' | LO==","  then LO=  0                 /* "      "         "   "   "     "    */
0005 if HI=='' | HI==","  then HI= 15                 /* "      "         "   "   "     "    */
0006 numeric digits max(9, HI*2)                      /*crudely calculate the # decimal digs.*/
0007 !.=.;             !.0= 1;   !.1= 1;      @.= 1   /*the  FACT  function uses memoization.*/
0008 do j=0  for  HI+1;     $= j==0;     jm= j-1 /*JM  is used for a shortcut  (below). */
0009 do k=0  for j;            _= jm - k  /* [↓]  calculate a Bell # the easy way*/
0010 $= $ + comb(jm, k) * @._             /*COMB≡combination or binomial function*/
0011 end   /*k*/
0012 @.j= $                                      /*assign the Jth Bell number to @ array*/
0013 if j>=LO  &  j<=HI  then say '      Bell('right(j, length(HI) )") = "    commas($)
0014 end   /*j*/
0015 exit                                             /*stick a fork in it,  we're all done. */
0016 /*──────────────────────────────────────────────────────────────────────────────────────*/
0017 commas:  parse arg _;  do c=length(_)-3  to 1  by -3; _=insert(',', _, c); end;   return _
0018 /*──────────────────────────────────────────────────────────────────────────────────────*/
0019 comb: procedure expose !.; parse arg x,y;        if x==y      then  return 1
0020 if x-y<y  then y= x - y;                   if !.x.y\==. then  return !.x.y / fact(y)
0021 _= 1;          do j=x-y+1  to x;  _= _*j;  end;    !.x.y= _;  return     _ / fact(y)
0022 /*──────────────────────────────────────────────────────────────────────────────────────*/
0023 fact: procedure expose !.; parse arg x;    if !.x\==.   then return !.x;          != 1
0024 do f=2  for x-1;      != ! * f;    end;        !.x= !;       return !
-------------------------------------------------------------------------
Cross Reference Table Solid Variable Names
-------------------------------------------------------------------------
001 x                23
002 f                24
-------------------------------------------------------------------------
Cross Reference Table Bizarre Variable Names
-------------------------------------------------------------------------
001 !.               -> newV1.           7 7 7 21 24
002 @.               -> newV2.           7 12
003 $                -> newV3            8 10
004 _                -> newV4            9 17 17 21 21
005 !                -> newV5            23 24
